# GitHub Release機能 説明資料

## 1. Release機能とは

GitHubのRelease機能は、ソフトウェアのバージョンをパッケージ化し、リリースノートやバイナリファイルを添付して公開できる機能です。Gitタグと連携して、特定のバージョンのソフトウェアを管理・配布することができます。

### 主な用途

- **バージョン管理**: 各リリースバージョンを明確に記録
- **リリースノート**: 変更内容や新機能をユーザーに分かりやすく伝える
- **ファイル配布**: ビルド済みバイナリやドキュメントを配布
- **変更履歴の可視化**: リリース間の変更を一覧表示

## 2. Release機能を使うメリット

| メリット | 説明 |
|---------|------|
| **バージョンの明確化** | リリースバージョンが一目で分かる |
| **変更内容の伝達** | 各バージョンで何が変わったか明示できる |
| **ファイル配布** | ビルド済みファームウェア等を簡単に配布できる |
| **履歴管理** | 過去のバージョンにいつでもアクセス可能 |
| **ダウンロード統計** | どのバージョンがダウンロードされたか確認できる |

## 3. Release作成の基本フロー

```
1. コードを安定化
   ↓
2. Gitタグを作成
   ↓
3. タグをプッシュ
   ↓
4. GitHubでReleaseを作成
   ↓
5. リリースノートを記載
   ↓
6. 必要に応じてファイルを添付
   ↓
7. Releaseを公開
```

## 4. 具体的な作成手順

### 4.1 Gitタグの作成とプッシュ

**方法1: コマンドラインで作成**

```bash
# 現在のコミットにタグを付ける
git tag -a v1.0.0 -m "リリースバージョン 1.0.0"

# タグをリモートリポジトリにプッシュ
git push origin v1.0.0
```

**方法2: 特定のコミットにタグを付ける**

```bash
# コミットハッシュを確認
git log --oneline

# 特定のコミットにタグを付ける
git tag -a v1.0.0 -m "リリースバージョン 1.0.0" <コミットハッシュ>

# プッシュ
git push origin v1.0.0
```

**タグの確認**

```bash
# ローカルのタグ一覧を表示
git tag

# タグの詳細を表示
git show v1.0.0
```

### 4.2 GitHub Web画面でRelease作成

#### ステップ1: Releaseページへ移動

1. GitHubのリポジトリページを開く
2. 右側の「Releases」をクリック（または上部メニューから選択）
3. 「Create a new release」ボタンをクリック

#### ステップ2: タグを選択

```
Choose a tag: [v1.0.0 ▼]
```

- プルダウンから既存のタグを選択
- または、新しいタグ名を入力（その場でタグが作成されます）

#### ステップ3: リリース情報を入力

**Release title（リリースタイトル）**
```
例: v1.0.0 - 初回リリース
例: Version 1.2.0 - LED制御機能追加
```

**Describe this release（リリースノート）**

詳細は「5. リリースノートの書き方」を参照

#### ステップ4: ファイルを添付（オプション）

- ドラッグ&ドロップでファイルを添付
- ビルド済みバイナリ、PDFマニュアル等を添付可能

**添付推奨ファイル（組み込み開発の場合）**
- `firmware_v1.0.0.bin` - ファームウェアバイナリ
- `firmware_v1.0.0.hex` - HEXファイル
- `Release_Note_v1.0.0.pdf` - リリースノートPDF版
- `User_Manual_v1.0.0.pdf` - ユーザーマニュアル

#### ステップ5: オプション設定

- ☑ **Set as the latest release** - 最新リリースとして設定（通常はチェック）
- ☐ **Set as a pre-release** - ベータ版などの場合にチェック
- ☐ **Create a discussion for this release** - ディスカッションを作成

#### ステップ6: 公開

- **「Publish release」** をクリックして公開
- または **「Save draft」** で下書き保存

## 5. リリースノートの書き方

### 5.1 基本構成

```markdown
## 📝 概要
このリリースの主な変更内容を簡潔に説明

## ✨ 新機能
- 追加した新機能をリスト形式で記載

## 🐛 バグ修正
- 修正したバグをリスト形式で記載

## 🔧 改善・変更
- 改善した内容や仕様変更をリスト形式で記載

## ⚠️ 注意事項
- アップグレード時の注意点や既知の問題

## 📦 ビルド情報
- ビルド環境やツールバージョン情報
```

### 5.2 具体例

```markdown
## v1.2.0 - LED制御機能拡張版

### 📝 概要
LED制御機能を拡張し、PWM調光機能とタイマー制御を追加しました。

### ✨ 新機能
- LED PWM調光機能の実装（0-100%の明るさ調整が可能）
- LEDタイマー制御機能（指定時間後に自動OFF）
- UART経由でのLED制御コマンド追加

### 🐛 バグ修正
- Issue #12: LED点滅時に不規則な動作が発生する問題を修正
- LED初期化時のメモリリークを修正

### 🔧 改善・変更
- LED制御APIのパフォーマンス向上（処理速度20%改善）
- エラーハンドリングの強化

### ⚠️ 注意事項
- v1.1.xからのアップグレード時は、設定ファイルの再設定が必要です
- PWM機能を使用する場合は、GPIO16-19のいずれかを使用してください

### 📦 ビルド情報
- ESP-IDF: v5.1.2
- Toolchain: xtensa-esp32-elf-gcc 11.2.0
- ビルド日時: 2025-12-30 10:00:00 JST

### 📥 ダウンロード
添付ファイルから該当するファームウェアをダウンロードしてください。
- `firmware_v1.2.0.bin` - メインファームウェア
- `bootloader_v1.2.0.bin` - ブートローダー

### 🔗 関連情報
- ドキュメント: https://docs.example.com/v1.2.0
- 使用方法: README.md参照
```

### 5.3 コミットログから自動生成

GitHubのRelease作成画面では、「Generate release notes」ボタンをクリックすると、前回のリリースからのコミットログを元に自動でリリースノートを生成できます。

自動生成された内容を編集して使用することも可能です。

## 6. Pre-release（プレリリース）の活用

### 6.1 Pre-releaseとは

正式リリース前のベータ版やアルファ版を配布するための機能です。

### 6.2 使用シーン

- **ベータテスト**: 限定ユーザーでのテスト版配布
- **リリース候補版**: 最終確認用のRC版
- **開発版**: 最新の開発版を試したいユーザー向け

### 6.3 バージョン命名規則

```
v1.0.0-alpha.1   # アルファ版
v1.0.0-beta.1    # ベータ版
v1.0.0-rc.1      # リリース候補版
v1.0.0           # 正式リリース
```

### 6.4 Pre-releaseの作成方法

Release作成時に **「Set as a pre-release」** にチェックを入れるだけです。

## 7. Releaseの管理

### 7.1 Releaseの編集

1. Releaseページから該当のReleaseをクリック
2. 右上の「Edit release」をクリック
3. 内容を編集して「Update release」

### 7.2 Releaseの削除

1. Releaseページから該当のReleaseをクリック
2. 右上の「Delete」をクリック
3. 確認ダイアログで「Delete this release」

**注意**: Releaseを削除してもGitタグは削除されません。タグも削除する場合は別途削除が必要です。

```bash
# ローカルのタグを削除
git tag -d v1.0.0

# リモートのタグを削除
git push origin :refs/tags/v1.0.0
```

### 7.3 Latest Releaseの変更

デフォルトでは最新のReleaseが「Latest」として表示されますが、任意のReleaseを「Latest」に設定できます。

1. 該当のReleaseを編集
2. 「Set as the latest release」にチェック
3. 保存

## 8. ベストプラクティス

### 8.1 バージョン番号の付け方

セマンティックバージョニングに従う:
```
v<MAJOR>.<MINOR>.<PATCH>

v1.0.0  # 初回リリース
v1.0.1  # バグ修正
v1.1.0  # 機能追加（後方互換あり）
v2.0.0  # 互換性のない変更
```

### 8.2 リリースの頻度

- **定期リリース**: 月次や四半期ごと
- **機能リリース**: 主要機能が完成したタイミング
- **緊急リリース**: 重大なバグ修正時

### 8.3 リリースノートの品質

- **明確に**: 技術的でない人にも分かりやすく
- **具体的に**: 「改善しました」ではなく「処理速度が20%向上」
- **ユーザー視点**: 開発者目線ではなく、使う人の視点で

### 8.4 ファイル命名規則

添付ファイルには必ずバージョン番号を含める:
```
✅ firmware_v1.0.0.bin
✅ user_manual_v1.0.0.pdf
❌ firmware.bin           # バージョンが不明
❌ latest.bin            # 更新されると分からなくなる
```

### 8.5 チェンジログとの連携

リポジトリに `CHANGELOG.md` を用意し、Releaseノートと同じ内容を記録することを推奨:

```markdown
# Changelog

## [1.2.0] - 2025-12-30
### Added
- LED PWM調光機能
- LEDタイマー制御機能

### Fixed
- Issue #12: LED点滅時の不規則動作を修正

## [1.1.0] - 2025-11-15
...
```

## 9. トラブルシューティング

### 9.1 タグが表示されない

**原因**: タグがリモートにプッシュされていない

**解決策**:
```bash
git push origin v1.0.0
```

### 9.2 間違ったタグを作成してしまった

**解決策**:
```bash
# ローカルのタグを削除
git tag -d v1.0.0

# リモートのタグを削除
git push origin :refs/tags/v1.0.0

# 正しいタグを作成し直す
git tag -a v1.0.0 -m "正しいメッセージ"
git push origin v1.0.0
```

### 9.3 Releaseは作成済みだがファイルを追加したい

Releaseは後から編集可能です。「Edit release」から追加できます。

## 10. まとめ

### Release機能活用のポイント

1. **定期的にリリース**: 変更が溜まりすぎる前にリリース
2. **明確なリリースノート**: 何が変わったかを明示
3. **適切なバージョニング**: セマンティックバージョニングを守る
4. **ファイルの添付**: ビルド済みバイナリを提供
5. **Pre-releaseの活用**: テスト版は明確に区別

### 参考資料

- [GitHub Docs - Releases](https://docs.github.com/en/repositories/releasing-projects-on-github)
- [Semantic Versioning](https://semver.org/)

---

**作成日**: 2025年12月30日  
**対象**: 旭光電機 ソフトウェア開発担当者  
**関連ドキュメント**: GitHub開発ルール.md
